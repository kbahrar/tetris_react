{"version":3,"sources":["utils/index.js","actions/index.js","reducers/game-reducer.js","reducers/index.js","components/GridSquare.js","components/GridBoard.js","components/NextBlock.js","components/ScoreBoard.js","components/Controls.js","components/MessagePopup.js","App.js","reportWebVitals.js","index.js"],"names":["randomShape","min","max","shapes","length","Math","floor","random","defaultState","grid","Array","from","fill","shape","rotation","x","y","nextShape","isRunning","score","speed","gameOver","nextRotation","canMoveTo","currentShape","row","col","proposedX","proposedY","possibleRow","undefined","addBlockToGrid","blockoffGrid","block","newGrid","checkRows","completedRows","indexOf","splice","unshift","moveLeft","type","moveRight","rotate","moveDown","drop","gameReducer","state","action","addInGrid","obj","newState","maybeY","newRotation","reducers","combineReducers","game","GridSquare","props","classes","classe","color","className","GridBoard","requestRef","useRef","lastUpdateTimeRef","progressTimeRef","dispatch","useDispatch","useSelector","blockColor","gridSquares","map","rowArray","square","blockX","blockY","k","key","update","time","current","requestAnimationFrame","deltaTime","useEffect","cancelAnimationFrame","NextBlock","ScoreBoard","onClick","event","e","Controls","keys","UP","DOWN","LEFT","RIGHT","ESPACE","Object","freeze","handleMoves","moveFunc","handleKeyDown","keyCode","window","addEventListener","removeEventListener","disabled","MessagePopup","classname","msg","title","message","store","createStore","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.dcb6661d.chunk.js","sourcesContent":["export const random = (min, max) => {\n\treturn Math.floor(Math.random() * (max - min + 1)) + min\n}\n\n// return default grid\nexport const gridDefault = () => {\n\tconst rows = 20\n\tconst cols = 10\n\n\tconst array = Array.from({ length: rows }, () => Array(cols).fill(0))\n\n\treturn array\n}\n\n// random shape\nexport const randomShape = () => {\n\treturn random(1, shapes.length - 1)\n}\n\n// default state for the game\nexport const defaultState = () => {\n\treturn {\n\t\tgrid: gridDefault(),\n\t\tshape: randomShape(),\n\t\trotation: 0,\n\t\tx: 5,\n\t\ty: -2,\n\t\tnextShape: randomShape(),\n\t\tisRunning: true,\n\t\tscore: 0,\n\t\tspeed: 1000,\n\t\tgameOver: false\n\t}\n}\n\n// next rotation for a shape\nexport const nextRotation = (shape, rotation) => {\n\treturn (rotation + 1) % shapes[shape].length\n}\n\n// moves checker\nexport const canMoveTo = (shape, grid, x, y, rotation) => {\n\tconst currentShape = shapes[shape][rotation]\n\n\tfor (let row = 0; row < currentShape.length; row++) {\n\t\tfor (let col = 0; col < currentShape[row].length; col++) {\n\t\t\tif (currentShape[row][col] !== 0) {\n\t\t\t\tconst proposedX = col + x\n\t\t\t\tconst proposedY = row + y\n\t\t\t\tif (proposedY < 0) {\n\t\t\t\t\tcontinue\n\t\t\t\t}\n\n\t\t\t\tconst possibleRow = grid[proposedY]\n\t\t\t\tif (possibleRow) {\n\t\t\t\t\tif (possibleRow[proposedX] === undefined || possibleRow[proposedX] !== 0)\n\t\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn true\n}\n\n// adds current shape to grid\nexport const addBlockToGrid = (shape, grid, x, y, rotation) => {\n\tlet blockoffGrid = false\n\tconst block = shapes[shape][rotation]\n\tconst newGrid = [...grid]\n\n\tfor (let row = 0; row < block.length; row++) {\n\t\tfor (let col = 0; col < block[row].length; col++) {\n\t\t\tif (block[row][col]) {\n\t\t\t\tconst yIndex = row + y\n\n\t\t\t\tif (yIndex < 0) {\n\t\t\t\t\tblockoffGrid = true\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tnewGrid[row + y][col + x] = shape\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn {grid: newGrid, gameOver: blockoffGrid}\n}\n\n// Points\nexport const checkRows = (grid) => {\n\tconst points = [0, 40, 100, 300, 1200]\n\tlet completedRows = 0\n\n\tfor (let row = 0; row < grid.length; row++) {\n\t\tif (grid[row].indexOf(0) === -1) {\n\t\t\tcompletedRows++\n\t\t\tgrid.splice(row, 1)\n\t\t\tgrid.unshift(Array(10).fill(0))\n\t\t}\n\t}\n\n\treturn points[completedRows]\n}\n\n// shapes and rotations\nexport const shapes = [\n\t// none\n\t[[[0, 0, 0, 0],\n\t[0, 0, 0, 0],\n\t[0, 0, 0, 0],\n\t[0, 0, 0, 0]]],\n\n\t// I\n\t[[[0, 0, 0, 0],\n\t[1, 1, 1, 1],\n\t[0, 0, 0, 0],\n\t[0, 0, 0, 0]],\n\n\t[[0, 1, 0, 0],\n\t[0, 1, 0, 0],\n\t[0, 1, 0, 0],\n\t[0, 1, 0, 0]]],\n\n\t// T\n\t[[[0, 0, 0, 0],\n\t[1, 1, 1, 0],\n\t[0, 1, 0, 0],\n\t[0, 0, 0, 0]],\n\n\t[[0, 1, 0, 0],\n\t[1, 1, 0, 0],\n\t[0, 1, 0, 0],\n\t[0, 0, 0, 0]],\n\n\t[[0, 1, 0, 0],\n\t[1, 1, 1, 0],\n\t[0, 0, 0, 0],\n\t[0, 0, 0, 0]],\n\n\t[[0, 1, 0, 0],\n\t[0, 1, 1, 0],\n\t[0, 1, 0, 0],\n\t[0, 0, 0, 0]]],\n\n\t// L\n\t[[[0, 0, 0, 0],\n\t[1, 1, 1, 0],\n\t[1, 0, 0, 0],\n\t[0, 0, 0, 0]],\n\n\t[[1, 1, 0, 0],\n\t[0, 1, 0, 0],\n\t[0, 1, 0, 0],\n\t[0, 0, 0, 0]],\n\n\t[[0, 0, 1, 0],\n\t[1, 1, 1, 0],\n\t[0, 0, 0, 0],\n\t[0, 0, 0, 0]],\n\n\t[[0, 1, 0, 0],\n\t[0, 1, 0, 0],\n\t[0, 1, 1, 0],\n\t[0, 0, 0, 0]]],\n\n\t// J\n\t[[[1, 0, 0, 0],\n\t[1, 1, 1, 0],\n\t[0, 0, 0, 0],\n\t[0, 0, 0, 0]],\n\n\t[[0, 1, 1, 0],\n\t[0, 1, 0, 0],\n\t[0, 1, 0, 0],\n\t[0, 0, 0, 0]],\n\n\t[[0, 0, 0, 0],\n\t[1, 1, 1, 0],\n\t[0, 0, 1, 0],\n\t[0, 0, 0, 0]],\n\n\t[[0, 1, 0, 0],\n\t[0, 1, 0, 0],\n\t[1, 1, 0, 0],\n\t[0, 0, 0, 0]]],\n\n\t// Z\n\t[[[0, 0, 0, 0],\n\t[1, 1, 0, 0],\n\t[0, 1, 1, 0],\n\t[0, 0, 0, 0]],\n\n\t[[0, 0, 1, 0],\n\t[0, 1, 1, 0],\n\t[0, 1, 0, 0],\n\t[0, 0, 0, 0]]],\n\n\t// S\n\t[[[0, 0, 0, 0],\n\t[0, 1, 1, 0],\n\t[1, 1, 0, 0],\n\t[0, 0, 0, 0]],\n\n\t[[0, 1, 0, 0],\n\t[0, 1, 1, 0],\n\t[0, 0, 1, 0],\n\t[0, 0, 0, 0]]],\n\n\t// O\n\t[[[0, 1, 1, 0],\n\t[0, 1, 1, 0],\n\t[0, 0, 0, 0],\n\t[0, 0, 0, 0]]]\n]","export const PAUSE = \"PAUSE\"\nexport const RESUME     = \"RESUME\"\nexport const MOVE_LEFT  = \"MOVE_LEFT\"\nexport const MOVE_RIGHT = \"MOVE_RIGHT\"\nexport const ROTATE     = \"ROTATE\"\nexport const MOVE_DOWN  = \"MOVE_DOWN\"\nexport const DROP  = \"DROP\" \nexport const RESTART    = \"RESTART\"\n\nexport const moveLeft = () => {\n    return {type: MOVE_LEFT}\n}\n\nexport const moveRight = () => {\n    return {type: MOVE_RIGHT}\n}\n\nexport const rotate = () => {\n    return { type: ROTATE }\n}\n\nexport const moveDown = () => {\n    return { type: MOVE_DOWN }\n}\n\nexport const pause = () => {\n    return { type: PAUSE }\n}\n\nexport const resume = () => {\n    return { type: RESUME }\n}\n\nexport const restart = () => {\n    return { type: RESTART }\n}\n\nexport const drop = () => {\n    return { type: DROP }\n}","import {\n    defaultState, nextRotation, canMoveTo, addBlockToGrid, checkRows, randomShape\n} from '../utils'\nimport {\n    MOVE_RIGHT, MOVE_LEFT, MOVE_DOWN, ROTATE, PAUSE, RESUME, RESTART, DROP\n} from \"../actions\"\n\nconst gameReducer = (state = defaultState(), action) => {\n    const { shape, grid, x, y, rotation, nextShape, score, isRunning } = state\n\n    const addInGrid = (y) => {\n        const obj = addBlockToGrid(shape, grid, x, y, rotation)\n        const newGrid = obj.grid\n        const gameOver = obj.gameOver\n\n        if (gameOver) {\n            const newState = { ...state }\n            newState.shape = 0\n            newState.grid = newGrid\n            return { ...state, gameOver: true }\n        }\n\n        const newState = defaultState()\n        newState.grid = newGrid\n        newState.shape = nextShape\n        newState.nextShape = randomShape()\n        newState.score = score\n        newState.isRunning = isRunning\n\n        // TODO: check and set level\n        newState.score = score + checkRows(newGrid)\n\n        return newState\n    }\n\n    const moveDown = () => {\n        const maybeY = y + 1\n        if (canMoveTo(shape, grid, x, maybeY, rotation)) {\n            return { ...state, y: maybeY }\n        }\n\n        return addInGrid(y)\n    }\n\n    const drop = () => {\n        var maybeY = y + 1\n        while (canMoveTo(shape, grid, x, maybeY, rotation)) {\n            maybeY++\n        }\n        maybeY -= 1\n        return addInGrid(maybeY)\n    }\n\n    switch (action.type) {\n        case ROTATE:\n            const newRotation = nextRotation(shape, rotation)\n            if (canMoveTo(shape, grid, x, y, newRotation)) {\n                return { ...state, rotation: newRotation }\n            }\n            return state\n\n        case MOVE_RIGHT:\n            if (canMoveTo(shape, grid, x + 1, y, rotation)) {\n                return { ...state, x: x + 1 }\n            }\n            return state\n\n        case MOVE_LEFT:\n            if (canMoveTo(shape, grid, x - 1, y, rotation)) {\n                return { ...state, x: x - 1 }\n            }\n            return state\n\n        case MOVE_DOWN:\n            return moveDown()\n\n        case RESUME:\n            return { ...state, isRunning: true }\n\n        case PAUSE:\n            return { ...state, isRunning: false }\n\n        case DROP:\n            return drop()\n\n        case RESTART:\n            return defaultState()\n\n        default:\n            return state\n    }\n}\n\nexport default gameReducer","import { combineReducers } from 'redux'\nimport gameReducer from './game-reducer'\n\nconst reducers = combineReducers({\n    game: gameReducer\n})\n\nexport default reducers","import React from 'react'\n\nexport default function GridSquare(props) {\n    const classes = `${props.classe} color-${props.color}`\n    return <div className={classes} />\n}","import React, { useRef, useEffect } from \"react\";\nimport GridSquare from \"./GridSquare\";\nimport { useSelector, useDispatch } from 'react-redux'\nimport { shapes } from \"../utils\";\nimport { moveDown } from \"../actions\";\n\nexport default function GridBoard(props) {\n\tconst requestRef = useRef()\n\tconst lastUpdateTimeRef = useRef(0)\n\tconst progressTimeRef = useRef(0)\n\tconst dispatch = useDispatch()\n\tconst game = useSelector((state) => state.game)\n\tconst { grid, shape, rotation, x, y, isRunning, speed } = game\n\n\tconst block = shapes[shape][rotation]\n\tconst blockColor = shape\n\n\tconst gridSquares = grid.map((rowArray, row) => {\n\n\t\treturn rowArray.map((square, col) => {\n\n\t\t\tconst blockX = col - x\n\t\t\tconst blockY = row - y\n\t\t\tlet color = square\n\n\t\t\tif (blockX >= 0 && blockX < block.length && blockY >= 0 && blockY < block.length) {\n\t\t\t\tcolor = block[blockY][blockX] === 0 ? color : blockColor\n\t\t\t}\n\n\t\t\tconst k = row * grid[0].length + col;\n\n\t\t\treturn <GridSquare\n\t\t\t\tkey={k}\n\t\t\t\tclasse={color > 0 ? 'grid-square-color' : 'grid-square'}\n\t\t\t\tcolor={color} />\n\t\t})\n\t})\n\n\tconst update = (time) => {\n\t\trequestRef.current = requestAnimationFrame(update)\n\t\tif (!isRunning) {\n\t\t\treturn\n\t\t}\n\t\tif (!lastUpdateTimeRef.current) {\n\t\t\tlastUpdateTimeRef.current = time\n\t\t}\n\n\t\tconst deltaTime = time - lastUpdateTimeRef.current\n\t\tprogressTimeRef.current += deltaTime\n\t\tif (progressTimeRef.current > speed) {\n\t\t\tdispatch(moveDown())\n\t\t\tprogressTimeRef.current = 0\n\t\t}\n\t\tlastUpdateTimeRef.current = time\n\t}\n\n\tuseEffect(() => {\n\t\trequestRef.current = requestAnimationFrame(update)\n\t\treturn () => cancelAnimationFrame(requestRef.current)\n\t}, [isRunning])\n\n\treturn (\n\t\t<div className='grid-board'>\n\t\t\t{gridSquares}\n\t\t</div>\n\t)\n}","import React from \"react\";\nimport GridSquare from \"./GridSquare\";\nimport {useSelector} from 'react-redux'\nimport { shapes } from \"../utils\";\n\nexport default function NextBlock(props) {\n    const nextShape = useSelector((state) => state.game.nextShape)\n\n    const box = shapes[nextShape][0]\n\n    const grid = box.map((rowArray, row) => {\n        return rowArray.map((square, col) => {\n            return <GridSquare\n                key={`${row}${col}`}\n                classe={square > 0 ? 'grid-square-color' : 'grid-square'}\n                color={square} />\n        })\n    })\n\n    return (\n        <div className=\"next-block\">\n            {grid}\n        </div>\n    )\n}","import React from \"react\"\nimport { useSelector, useDispatch } from \"react-redux\"\nimport { pause, restart, resume } from \"../actions\"\n\nexport default function ScoreBoard(props) {\n    const dispatch = useDispatch()\n    const game = useSelector((state) => state.game)\n    const { score, isRunning, gameOver } = game\n\n    const togglePlay = (event) => {\n        if (gameOver) { return }\n        if (isRunning) {\n            dispatch(pause())\n        } else {\n            dispatch(resume())\n        }\n    }\n\n    return (\n        <div className=\"score-board\">\n            <div className=\"info-dev\">Score: {score}</div>\n            <div className=\"info-dev\">Level: 1</div>\n            <button className=\"control-button\" onClick={togglePlay}>\n                {isRunning ? 'Pause' : 'Play'}\n            </button>\n            <button className=\"control-button\" onClick={(e) => {\n                dispatch(restart())\n            }}>\n                Restart\n            </button>\n        </div>\n    )\n}","import React, { useEffect } from \"react\";\nimport { useSelector, useDispatch, } from 'react-redux'\nimport { moveDown, moveLeft, moveRight, rotate, drop } from '../actions'\n\nexport default function Controls(props) {\n    const keys = {\n        UP: 38,\n        DOWN: 40,\n        LEFT: 37,\n        RIGHT: 39,\n        ESPACE: 32\n    }\n    Object.freeze(keys)\n\n    const dispatch = useDispatch()\n    const isRunning = useSelector((state) => state.game.isRunning)\n    const gameOver = useSelector((state) => state.game.gameOver)\n\n    const handleMoves = (moveFunc) => {\n        if (!isRunning || gameOver) {\n            return\n        }\n        dispatch(moveFunc())\n    }\n\n    const handleKeyDown = (event) => {\n        switch (event.keyCode) {\n            case keys.UP:\n                handleMoves(rotate)\n                return\n            case keys.DOWN:\n                handleMoves(moveDown)\n                return\n            case keys.LEFT:\n                handleMoves(moveLeft)\n                return\n            case keys.RIGHT:\n                handleMoves(moveRight)\n                return\n            case keys.ESPACE:\n                handleMoves(drop)\n                return\n            default:\n                return\n        }\n    }\n\n    useEffect(() => {\n        window.addEventListener('keydown', handleKeyDown)\n        return () => {\n            window.removeEventListener('keydown', handleKeyDown);\n        };\n    }, [isRunning])\n\n    return (\n        <div className=\"controls\">\n            <button disabled={!isRunning || gameOver} className=\"control-button\" onClick={() => handleMoves(moveLeft)}>Left</button>\n            <button disabled={!isRunning || gameOver} className=\"control-button\" onClick={() => handleMoves(moveRight)}>Right</button>\n            <button disabled={!isRunning || gameOver} className=\"control-button\" onClick={() => handleMoves(rotate)}>Rotate</button>\n            <button disabled={!isRunning || gameOver} className=\"control-button\" onClick={() => handleMoves(moveDown)}>Down</button>\n            <button disabled={!isRunning || gameOver} className=\"control-button\" onClick={() => handleMoves(drop)}>Drop</button>\n        </div>\n    )\n}","import React from \"react\";\nimport { useSelector } from 'react-redux'\n\nexport default function MessagePopup(props) {\n    const isRunning = useSelector((state) => state.game.isRunning)\n    const gameOver = useSelector((state) => state.game.gameOver)\n    var classname = 'message-popup'\n    var msg = {title: '', message: ''}\n\n    if (isRunning && !gameOver)\n        classname = 'message-popup-hidden'\n    \n    if (!isRunning) {\n        msg.title = 'Paused'\n        msg.message = 'You can resume your game by click in play button'\n    }\n\n    if (gameOver) {\n        msg.title = 'Game Over'\n        msg.message = 'You can restart your game by click in restart button'\n    }\n    \n    return (\n        <div className={classname}>\n            <h1>{msg.title}</h1>\n            <p>{msg.message}</p>\n        </div>\n    )\n}","import './App.css';\nimport React from 'react';\nimport { createStore } from 'redux'\nimport { Provider } from 'react-redux'\nimport reducers from './reducers';\n\nimport GridBoard from './components/GridBoard';\nimport NextBlock from './components/NextBlock';\nimport ScoreBoard from './components/ScoreBoard';\nimport Controls from './components/Controls';\nimport MessagePopup from './components/MessagePopup';\n\nconst store = createStore(reducers)\n\nfunction App() {\n\treturn (\n\t\t<Provider store={store}>\n\t\t\t<div className=\"App\">\n\t\t\t\t<header className=\"App-header\">\n\t\t\t\t\t<h1 className=\"App-title\">Tetris</h1>\n\t\t\t\t</header>\n\t\t\t\t<GridBoard />\n\t\t\t\t<NextBlock />\n\t\t\t\t<ScoreBoard />\n\t\t\t\t<Controls />\n\t\t\t\t<MessagePopup />\n\t\t\t</div>\n\t\t</Provider>\n\t);\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}