(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(3),u=n.n(c),o=(n(14),n(15),n(4)),i=n(1),l=n(2),s=n(8),m=function(){return e=1,t=E.length-1,Math.floor(Math.random()*(t-e+1))+e;var e,t},f=function(){return{grid:Array.from({length:20},(function(){return Array(10).fill(0)})),shape:m(),rotation:0,x:5,y:-2,nextShape:m(),isRunning:!0,score:0,speed:1e3,gameOver:!1}},b=function(e,t){return(t+1)%E[e].length},d=function(e,t,n,r,a){for(var c=E[e][a],u=0;u<c.length;u++)for(var o=0;o<c[u].length;o++)if(0!==c[u][o]){var i=o+n,l=u+r;if(l<0)continue;var s=t[l];if(!s)return!1;if(void 0===s[i]||0!==s[i])return!1}return!0},g=function(e,t,n,r,a){for(var c=!1,u=E[e][a],o=Object(s.a)(t),i=0;i<u.length;i++)for(var l=0;l<u[i].length;l++){if(u[i][l])i+r<0?c=!0:o[i+r][l+n]=e}return{grid:o,gameOver:c}},v=function(e){for(var t=0,n=0;n<e.length;n++)-1===e[n].indexOf(0)&&(t++,e.splice(n,1),e.unshift(Array(10).fill(0)));return[0,40,100,300,1200][t]},E=[[[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]],[[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]]],[[[0,0,0,0],[1,1,1,0],[0,1,0,0],[0,0,0,0]],[[0,1,0,0],[1,1,0,0],[0,1,0,0],[0,0,0,0]],[[0,1,0,0],[1,1,1,0],[0,0,0,0],[0,0,0,0]],[[0,1,0,0],[0,1,1,0],[0,1,0,0],[0,0,0,0]]],[[[0,0,0,0],[1,1,1,0],[1,0,0,0],[0,0,0,0]],[[1,1,0,0],[0,1,0,0],[0,1,0,0],[0,0,0,0]],[[0,0,1,0],[1,1,1,0],[0,0,0,0],[0,0,0,0]],[[0,1,0,0],[0,1,0,0],[0,1,1,0],[0,0,0,0]]],[[[1,0,0,0],[1,1,1,0],[0,0,0,0],[0,0,0,0]],[[0,1,1,0],[0,1,0,0],[0,1,0,0],[0,0,0,0]],[[0,0,0,0],[1,1,1,0],[0,0,1,0],[0,0,0,0]],[[0,1,0,0],[0,1,0,0],[1,1,0,0],[0,0,0,0]]],[[[0,0,0,0],[1,1,0,0],[0,1,1,0],[0,0,0,0]],[[0,0,1,0],[0,1,1,0],[0,1,0,0],[0,0,0,0]]],[[[0,0,0,0],[0,1,1,0],[1,1,0,0],[0,0,0,0]],[[0,1,0,0],[0,1,1,0],[0,0,1,0],[0,0,0,0]]],[[[0,1,1,0],[0,1,1,0],[0,0,0,0],[0,0,0,0]]]],O=function(){return{type:"MOVE_LEFT"}},p=function(){return{type:"MOVE_RIGHT"}},h=function(){return{type:"ROTATE"}},j=function(){return{type:"MOVE_DOWN"}},y=function(){return{type:"DROP"}},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f(),t=arguments.length>1?arguments[1]:void 0,n=e.shape,r=e.grid,a=e.x,c=e.y,u=e.rotation,o=e.nextShape,i=e.score,s=e.isRunning,E=function(t){var c=g(n,r,a,t,u),b=c.grid;if(c.gameOver){var d=Object(l.a)({},e);return d.shape=0,d.grid=b,Object(l.a)(Object(l.a)({},e),{},{gameOver:!0})}var E=f();return E.grid=b,E.shape=o,E.nextShape=m(),E.score=i,E.isRunning=s,E.score=i+v(b),E},O=function(){var t=c+1;return d(n,r,a,t,u)?Object(l.a)(Object(l.a)({},e),{},{y:t}):E(c)},p=function(){for(var e=c+1;d(n,r,a,e,u);)e++;return E(e-=1)};switch(t.type){case"ROTATE":var h=b(n,u);return d(n,r,a,c,h)?Object(l.a)(Object(l.a)({},e),{},{rotation:h}):e;case"MOVE_RIGHT":return d(n,r,a+1,c,u)?Object(l.a)(Object(l.a)({},e),{},{x:a+1}):e;case"MOVE_LEFT":return d(n,r,a-1,c,u)?Object(l.a)(Object(l.a)({},e),{},{x:a-1}):e;case"MOVE_DOWN":return O();case"RESUME":return Object(l.a)(Object(l.a)({},e),{},{isRunning:!0});case"PAUSE":return Object(l.a)(Object(l.a)({},e),{},{isRunning:!1});case"DROP":return p();case"RESTART":return f();default:return e}},N=Object(o.a)({game:R});function T(e){var t="".concat(e.classe," color-").concat(e.color);return a.a.createElement("div",{className:t})}function k(e){var t=Object(r.useRef)(),n=Object(r.useRef)(0),c=Object(r.useRef)(0),u=Object(i.b)(),o=Object(i.c)((function(e){return e.game})),l=o.grid,s=o.shape,m=o.rotation,f=o.x,b=o.y,d=o.isRunning,g=o.speed,v=E[s][m],O=s,p=l.map((function(e,t){return e.map((function(e,n){var r=n-f,c=t-b,u=e;r>=0&&r<v.length&&c>=0&&c<v.length&&(u=0===v[c][r]?u:O);var o=t*l[0].length+n;return a.a.createElement(T,{key:o,classe:u>0?"grid-square-color":"grid-square",color:u})}))})),h=function e(r){if(t.current=requestAnimationFrame(e),d){n.current||(n.current=r);var a=r-n.current;c.current+=a,c.current>g&&(u({type:"MOVE_DOWN"}),c.current=0),n.current=r}};return Object(r.useEffect)((function(){return t.current=requestAnimationFrame(h),function(){return cancelAnimationFrame(t.current)}}),[d]),a.a.createElement("div",{className:"grid-board"},p)}function A(e){var t=Object(i.c)((function(e){return e.game.nextShape})),n=E[t][0].map((function(e,t){return e.map((function(e,n){return a.a.createElement(T,{key:"".concat(t).concat(n),classe:e>0?"grid-square-color":"grid-square",color:e})}))}));return a.a.createElement("div",{className:"next-block"},n)}function S(e){var t=Object(i.b)(),n=Object(i.c)((function(e){return e.game})),r=n.score,c=n.isRunning,u=n.gameOver;return a.a.createElement("div",{className:"score-board"},a.a.createElement("div",{className:"info-dev"},"Score: ",r),a.a.createElement("div",{className:"info-dev"},"Level: 1"),a.a.createElement("button",{className:"control-button",onClick:function(e){u||t(c?{type:"PAUSE"}:{type:"RESUME"})}},c?"Pause":"Play"),a.a.createElement("button",{className:"control-button",onClick:function(e){t({type:"RESTART"})}},"Restart"))}function C(e){var t={UP:38,DOWN:40,LEFT:37,RIGHT:39,ESPACE:32};Object.freeze(t);var n=Object(i.b)(),c=Object(i.c)((function(e){return e.game.isRunning})),u=Object(i.c)((function(e){return e.game.gameOver})),o=function(e){c&&!u&&n(e())},l=function(e){switch(e.keyCode){case t.UP:return void o(h);case t.DOWN:return void o(j);case t.LEFT:return void o(O);case t.RIGHT:return void o(p);case t.ESPACE:return void o(y);default:return}};return Object(r.useEffect)((function(){return window.addEventListener("keydown",l),function(){window.removeEventListener("keydown",l)}}),[c]),a.a.createElement("div",{className:"controls"},a.a.createElement("button",{disabled:!c||u,className:"control-button",onClick:function(){return o(O)}},"Left"),a.a.createElement("button",{disabled:!c||u,className:"control-button",onClick:function(){return o(p)}},"Right"),a.a.createElement("button",{disabled:!c||u,className:"control-button",onClick:function(){return o(h)}},"Rotate"),a.a.createElement("button",{disabled:!c||u,className:"control-button",onClick:function(){return o(j)}},"Down"),a.a.createElement("button",{disabled:!c||u,className:"control-button",onClick:function(){return o(y)}},"Drop"))}function P(e){var t=Object(i.c)((function(e){return e.game.isRunning})),n=Object(i.c)((function(e){return e.game.gameOver})),r="message-popup",c={title:"",message:""};return t&&!n&&(r="message-popup-hidden"),t||(c.title="Paused",c.message="You can resume your game by click in play button"),n&&(c.title="Game Over",c.message="You can restart your game by click in restart button"),a.a.createElement("div",{className:r},a.a.createElement("h1",null,c.title),a.a.createElement("p",null,c.message))}var x=Object(o.b)(N);var M=function(){return a.a.createElement(i.a,{store:x},a.a.createElement("div",{className:"App"},a.a.createElement("header",{className:"App-header"},a.a.createElement("h1",{className:"App-title"},"Tetris")),a.a.createElement(k,null),a.a.createElement(A,null),a.a.createElement(S,null),a.a.createElement(C,null),a.a.createElement(P,null)))},w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,21)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,u=t.getTTFB;n(e),r(e),a(e),c(e),u(e)}))};u.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(M,null)),document.getElementById("root")),w()},9:function(e,t,n){e.exports=n(19)}},[[9,1,2]]]);
//# sourceMappingURL=main.dcb6661d.chunk.js.map